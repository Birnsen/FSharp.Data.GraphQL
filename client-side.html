<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Using FSharp.Data.GraphQL on the client side
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="FSharp implementation of Facebook GraphQL query language"/>
    <meta name="author" content="Bazinga Technologies Inc"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/FSharp.Data.GraphQL/content/style.css" />
    <script type="text/javascript" src="/FSharp.Data.GraphQL/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/bazingatechnologies/FSharp.Data.GraphQL">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/FSharp.Data.GraphQL/index.html">FSharp.Data.GraphQL</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Using-FSharp-Data-GraphQL-on-the-client-side" class="anchor" href="#Using-FSharp-Data-GraphQL-on-the-client-side">Using FSharp.Data.GraphQL on the client side</a></h1>
<p>FSharp.Data.GraphQL offers a client-side library, which can be used to query <strong>any</strong> GraphQL-compatible server. It includes a type provider (erasing one), which is able to introspect remotelly a schema of the server it connects to, and give you the ability to make typesafe queries from the client side. To use GraphQL type provider from the client side, simply supply it an endpoint URL of target GraphQL server:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">Data</span><span class="o">.</span><span class="i">GraphQL</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="t">GraphQlClient</span> <span class="o">=</span> <span class="i">GraphQLProvider</span><span class="o">&lt;</span><span class="s">&quot;http://graphql-server.com&quot;</span><span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>
<p>This way we get type provider, which exposes top level queries and mutations in form of the methods and fields. F# client also gives a custom DSL that alows to construct GraphQL queries programatically. For example, client may execute GraphQL query string as defined below:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip"><code lang="graphql">async {
    let! data = GraphQlClient.Query """
        {
            hero(id: "1000") {
                name,
                friends {
                    name
                }
                ... on Human {
                    appearsIn
                }
            }
        }
        """
    return data
}
</code></pre></td></tr></table>
<p>However this may not be a typesafe way of working with type providers. Other approach is to use GraphQL query DSL for that:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="i">async</span> {
    <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="i">data</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 6)" onmouseover="showTip(event, 'fs3', 6)" class="i">GraphQlClient</span><span class="o">.</span><span class="i">Queries</span><span class="o">.</span><span class="i">Hero</span>(<span class="s">&quot;1000&quot;</span>, <span class="k">fun</span> <span class="i">c</span> <span class="k">-&gt;</span> <span class="i">Fields</span>(
            <span class="i">c</span><span class="o">.</span><span class="i">name</span>,
            <span class="i">Selection</span>(<span class="i">c</span><span class="o">.</span><span class="i">friends</span>, <span class="k">fun</span> <span class="i">f</span> <span class="k">-&gt;</span> <span class="i">Fields</span>(
                <span class="i">f</span><span class="o">.</span><span class="i">name</span>
            )),
            <span onmouseout="hideTip(event, 'fs3', 7)" onmouseover="showTip(event, 'fs3', 7)" class="i">GraphQlClient</span><span class="o">.</span><span class="i">Types</span><span class="o">.</span><span class="i">Human</span><span class="o">.</span><span class="i">On</span>(<span class="k">fun</span> <span class="i">h</span> <span class="k">-&gt;</span> <span class="i">Fields</span>(
                <span class="i">h</span><span class="o">.</span><span class="i">appearsIn</span>
            ))
        ))
    <span class="k">return</span> <span onmouseout="hideTip(event, 'fs5', 8)" onmouseover="showTip(event, 'fs5', 8)" class="i">data</span>
}
</code></pre></td>
</tr>
</table>
<p>GraphQL client is fully compatible with <a href="https://fable-compiler.github.io/">Fable compiler</a>, which gives you a possiblity to write F# applications targeted for the browsers.</p>

<div class="tip" id="fs1">namespace Microsoft.FSharp</div>
<div class="tip" id="fs2">namespace Microsoft.FSharp.Data</div>
<div class="tip" id="fs3">type GraphQlClient = obj<br /><br />Full name: clientside.GraphQlClient</div>
<div class="tip" id="fs4">val async : AsyncBuilder<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.async</div>
<div class="tip" id="fs5">val data : obj</div>

        </div>
        <div class="span3">
          <img src="/FSharp.Data.GraphQL/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">FSharp.Data.GraphQL</li>
            <li><a href="/FSharp.Data.GraphQL/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/FSharp.Data.GraphQL">Get Library via NuGet</a></li>
            <li><a href="http://github.com/bazingatechnologies/FSharp.Data.GraphQL">Source Code on GitHub</a></li>
            <li><a href="/FSharp.Data.GraphQL/license.html">License</a></li>
            <li><a href="/FSharp.Data.GraphQL/release-notes.html">Release Notes</a></li>
            
            <li class="nav-header">Documentation</li>
            <li><a href="/FSharp.Data.GraphQL/reference/index.html">API Reference</a></li>
            <li><a href="/FSharp.Data.GraphQL/type-system.html">Working with GraphQL type system</a></li>
            <li><a href="/FSharp.Data.GraphQL/execution-pipeline.html">Execution pipeline overview</a></li>
            <li><a href="/FSharp.Data.GraphQL/linq.html">Property tracking</a></li>
            <li><a href="/FSharp.Data.GraphQL/client-side.html">GraphQL on the client side</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/bazingatechnologies/FSharp.Data.GraphQL"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
